<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta charset="utf-8"/>
    <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <meta name="format-detection" content="telephone=no">
    <link rel="stylesheet" href="/styles/scroll-style1.css"/>
</head>
<body>
<div id="picScroll" class="picScroll">
    <div class="banner-img-container">
        <div class="banner-img-wrap">
            <ul>
                <li pic-index="0"><div><iframe src="http://www.baidu.com" frameborder="0"></iframe></div><i class="slidedown-icon active"></i></li>
            </ul>
        </div>
    </div>
    <div class="banner-nav-container">
        <div class="banner-nav-img-wrap">
            <div class="nav-move-wrap">
                <ul>
                    <li class="active"></li>
                    <li></li>
                    <li></li>
                </ul>
            </div>

        </div>
    </div>
</div>


<script src="/scripts/sea-modules/seajs/seajs/2.2.3/sea.js"></script>
<script src="/scripts/sea-modules/sea-config.js"></script>
<script>
    seajs.use(['$','picScroller1'],function($,picScroller){

        var urls = ["http://www.baidu.com","http://bbs.byr.cn","http://www.newsmth.net"];

        var imgScroller = new picScroller({
            element:$("#picScroll"),
            animClass:"scroll",
            urls:urls
        });

        imgScroller.bannerBox.on("click",".slideup-icon",function(){
            imgScroller.setFocusItem(imgScroller.picIndex-1);
        });
        imgScroller.bannerBox.on("click",".slidedown-icon",function(){
            imgScroller.setFocusItem(imgScroller.picIndex+1);
        });


        function bindWheel(){
            $(document).on('mousewheel',function(e){
                if(!imgScroller.animStop){
                    return;
                }
                var $pageWrap = $(".sub-page-wrap",imgScroller.bannerBox),
                        $page = $(".sub-page",$pageWrap),
                        wrapTop = $pageWrap.scrollTop(),
                        pageH = $page.outerHeight(),
                        boxHeight = imgScroller.bannerBox.outerHeight();
                var delta = e.originalEvent.wheelDelta;
                if(delta<0 && !(wrapTop+boxHeight>=pageH)){
                    return;
                }
                if(delta>0 && wrapTop >0){
                    return;
                }
                var newDrt = delta>0 ? imgScroller.picIndex-1:imgScroller.picIndex+1;
                (newDrt>=0) && imgScroller.setFocusItem(newDrt);
            });
        }
        function bindTouch(){
            var self = imgScroller;
            var oldY = 0,newY = 0,delta = 0,touchE = null,idx= 0,oldTime= 0,deltaTime=0;
            var events = {
                "touchstart":function(e){
                    touchE = e.originalEvent.touches[0];
                    oldY = touchE.pageY;
                    oldTime = e.timeStamp;
                },
                "touchmove":function(e){

                },
                "touchend":function(e){
                    touchE = e.originalEvent.changedTouches[0];
                    newY = touchE.pageY;
                    delta = newY-oldY;
                    deltaTime = e.timeStamp-oldTime;
                    if(delta==0 || deltaTime >600){
                        return;
                    }

                    var $pageWrap = $(".sub-page-wrap",imgScroller.bannerBox),
                            $page = $(".sub-page",$pageWrap),
                            wrapTop = $pageWrap.scrollTop(),
                            pageH = $page.outerHeight(),
                            boxHeight = imgScroller.bannerBox.outerHeight();

                    if(delta<0 && !(wrapTop+boxHeight>=pageH)){
                        return;
                    }
                    if(delta>0 && wrapTop >0){
                        return;
                    }

                    idx = delta>0? self.picIndex-1:self.picIndex+1;
                    (idx>=0) && self.setFocusItem(idx);
                }
            };
            self.bindEvents(events,self.bannerBox);
        };


    });
</script>
</body>
</html>